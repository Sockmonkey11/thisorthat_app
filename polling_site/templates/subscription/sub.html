{% extends "polling_site/base.html" %}
{% block script %} <script src="https://js.stripe.com/v3/"></script> {% endblock script%}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <h2 class="mb-4 text-center">Subscribe to Change Your Vote</h2>
        <p class="lead text-center">
            Unlock the ability to change your vote on any poll at any time for just <strong>$10</strong>!
        </p>
        <form action="{% url "checkout" %}" method="post">
            {% csrf_token %}
            {% if user.is_authenticated %}
                <input type="hidden" name="user_id" value="{{ user.id }}">
            {% else %}
                <p class="text-danger">You must be logged in to subscribe.</p>
                <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
                <a href="{% url 'register' %}" class="btn btn-secondary">Register</a>
            {% endif %}
            <input type="hidden" name="price_id" value="{{ price_id }}">
            <button type="submit" class="btn btn-success btn-lg w-100">
                <i class="bi bi-credit-card"></i> Subscribe for $10
            </button>
        </form>
        <form>
            <a href="{% url 'cancel' %}" class="btn btn-danger btn-lg w-100 mt-3">
                <i class="bi bi-x-circle"></i> Cancel Subscription
            </a>
        </form>
        <p class="mt-3 text-center text-muted">
            Secure payment powered by Stripe.
        </p>
    </div>
</div>
{%endblock %}


